---
import ShoppingLayout from '../../../../layouts/ShoppingLayout.astro';
import Footer from '../../../../components/Footer.astro';

export const prerender = false;

const testData = {
  id: "0fdcad27-a0a1-4d8f-8ace-aa0f033fb3e2",
  name: "Iodine Test",
  price: 33.00,
  category: "general-health",
  subcategory: "minerals",
  questName: "Iodine Test",
  description: "Measure iodine levels in your urine to assess dietary intake and thyroid health.",
  turnaround: "3–5 business days",
  sampleType: "Urine (spot or 24-hour collection)",
  fastingRequired: false,
  fastingDuration: "",
  alsoKnownAs: ["Urinary Iodine Test","Iodine Concentration Test"]
};
---

<ShoppingLayout 
  title={`${testData.name} – Order Online | Track Your Labs`}
  description={`Order the ${testData.name} online for $${testData.price.toFixed(2)}. Measure iodine levels in your urine to assess dietary intake and thyroid health.`}
>
  <main class="flex-1">
    <!-- Hero Section -->
    <div class="min-h-screen bg-base-100">
      <div>
        <div class="max-w-2xl mx-auto px-4">
          <!-- Breadcrumb -->
          <nav class="text-sm breadcrumbs py-4">
            <ul>
              <li><a href="/" class="text-gray-600 hover:text-gray-900">Home</a></li>
              <li><a href="/tests" class="text-gray-600 hover:text-gray-900">Tests</a></li>
              <li><a href="/tests#general-health" class="text-gray-600 hover:text-gray-900">General Health</a></li>
              <li class="text-gray-900">Iodine Test</li>
            </ul>
          </nav>

          <h1 class="text-4xl font-bold mb-4">{testData.name}</h1>
          <p class="text-lg text-gray-600 leading-relaxed mb-8">
            {testData.description}
          </p>
          
          <!-- Price and Add to Cart -->
          <div class="mb-12">
            <div class="flex items-baseline gap-2 mb-6">
              <span class="text-4xl font-bold">${testData.price.toFixed(0)}</span>
            </div>
            
            <button id="add-to-cart" class="btn btn-primary btn-lg px-16">
              Add to Cart
            </button>
          </div>

          <!-- Marketing Copy Section -->
          <div class="marketing-section">
            <div class="vertical-separator"></div>
            
            <div class="marketing-content">
              <!-- Quick Facts -->
              <div class="quick-facts-section">
                <h2 class="section-title">Quick Facts</h2>
                <table class="facts-table">
                  <tbody>
                    <tr>
                      <td class="fact-label">Test Type</td>
                      <td class="fact-value">Urine test</td>
                    </tr>
                    <tr>
                      <td class="fact-label">Fasting Required</td>
                      <td class="fact-value">No</td>
                    </tr>
                    <tr>
                      <td class="fact-label">Sample Type</td>
                      <td class="fact-value">{testData.sampleType}</td>
                    </tr>
                    <tr>
                      <td class="fact-label">Turnaround Time</td>
                      <td class="fact-value">{testData.turnaround}</td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <!-- What This Test Measures -->
              <div class="content-section">
                <h2 class="section-title">What This Test Measures</h2>
                <p class="section-text">
                  The Iodine Test measures the amount of iodine excreted in your urine. Iodine is essential for the production of thyroid hormones, which regulate metabolism, growth, and development. Low iodine levels can cause goiter, hypothyroidism, and developmental issues. High iodine levels may also cause thyroid dysfunction.
                </p>
              </div>

              

              <!-- How It Works -->
              <div class="content-section">
                <h2 class="section-title">How It Works</h2>
                <div class="steps-container">
                  <div class="step-item">
                    <div class="step-number">1</div>
                    <div class="step-content">
                      <h3 class="step-title">Order Online</h3>
                      <p class="step-text">Select your test and pay securely</p>
                    </div>
                  </div>
                  <div class="step-item">
                    <div class="step-number">2</div>
                    <div class="step-content">
                      <h3 class="step-title">Visit a Lab</h3>
                      <p class="step-text">Provide your sample at a Quest Diagnostics location</p>
                    </div>
                  </div>
                  <div class="step-item">
                    <div class="step-number">3</div>
                    <div class="step-content">
                      <h3 class="step-title">Get Results</h3>
                      <p class="step-text">Access your secure, doctor-reviewed results within {testData.turnaround}</p>
                    </div>
                  </div>
                </div>
              </div>

              

              <!-- Understanding Your Results -->
              <div class="content-section">
                <h2 class="section-title">Understanding Your Results</h2>
                <div class="results-table">
                  <div class="result-row">
                    <span class="result-level">Low Urinary Iodine</span>
                    <span class="result-meaning">May indicate insufficient dietary iodine intake or impaired absorption</span>
                  </div>
                  <div class="result-row">
                    <span class="result-level">Normal Iodine</span>
                    <span class="result-meaning">Adequate iodine status for thyroid function</span>
                  </div>
                  <div class="result-row">
                    <span class="result-level">High Urinary Iodine</span>
                    <span class="result-meaning">May indicate excessive iodine intake or exposure</span>
                  </div>
                </div>
                <p class="text-sm text-gray-600 italic mt-4">
                  Note: Urinary iodine levels can vary daily; 24-hour collection may provide a more accurate estimate. Results should be interpreted by a healthcare provider in context of overall health.
                </p>
              </div>

              <!-- FAQ -->
              <div class="content-section">
                <h2 class="section-title">Frequently Asked Questions</h2>
                <div class="faq-container">
                  <details class="faq-item">
                    <summary class="faq-question">Do I need to fast for this test?</summary>
                    <p class="faq-answer">No, fasting is not required for the urine iodine test.</p>
                  </details>
                  
                  <details class="faq-item">
                    <summary class="faq-question">What foods are high in iodine?</summary>
                    <p class="faq-answer">Seafood, seaweed, iodized salt, dairy products, and eggs are good sources of iodine.</p>
                  </details>
                  
                  <details class="faq-item">
                    <summary class="faq-question">How long until I get results?</summary>
                    <p class="faq-answer">Results are typically available within 3–5 business days.</p>
                  </details>
                  
                  <details class="faq-item">
                    <summary class="faq-question">Why is iodine important?</summary>
                    <p class="faq-answer">Iodine is essential for thyroid hormone production, which regulates metabolism, growth, and development.</p>
                  </details>
                </div>
              </div>

              <!-- Compliance & Trust -->
              <div class="cta-section">
                <p class="cta-text">
                  <strong>CLIA-Certified & HIPAA-Compliant.</strong> This test is processed by Quest Diagnostics, 
                  a trusted lab network. Your information is protected and results are reviewed by qualified medical professionals.
                </p>
              </div>

              <!-- Related Tests -->
              <div class="content-section">
                <h2 class="section-title">Related Tests</h2>
                <div class="related-tests">
                  <p class="text-gray-600 mb-4">Often ordered with:</p>
                  <div class="related-links">
                    <a href="/tests/thyroid-health/function/tsh-function" class="link-item">TSH Function →</a>
                    <a href="/tests/general-health/minerals/zinc" class="link-item">Zinc →</a>
                    <a href="/tests/general-health/minerals/magnesium" class="link-item">Magnesium →</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <Footer />
</ShoppingLayout>

<style>
  .marketing-section {
    margin-top: 4rem;
  }

  .vertical-separator {
    width: 1px;
    height: 100px;
    background: linear-gradient(to bottom, #e5e7eb, #e5e7eb 50%, transparent);
    margin: 0 auto 3rem;
  }

  .marketing-content {
    color: #374151;
  }

  .section-title {
    font-size: 1.875rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 1.5rem;
    line-height: 1.3;
  }

  .content-section {
    margin-bottom: 3.5rem;
  }

  .section-text {
    font-size: 1.125rem;
    line-height: 1.75;
    color: #4b5563;
    margin: 0;
  }

  /* Quick Facts Table */
  .quick-facts-section {
    margin-bottom: 3.5rem;
  }

  .facts-table {
    width: 100%;
    border-collapse: collapse;
  }

  .facts-table tbody tr {
    border-bottom: 1px solid #e5e7eb;
  }

  .facts-table tbody tr:last-child {
    border-bottom: none;
  }

  .fact-label {
    padding: 0.75rem 0;
    font-size: 0.875rem;
    color: #6b7280;
    font-weight: 600;
    width: 40%;
  }

  .fact-value {
    padding: 0.75rem 0;
    font-size: 1rem;
    color: #111827;
  }

  /* Benefits List */
  .benefits-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .benefit-item {
    margin-bottom: 1.25rem;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    font-size: 1rem;
    line-height: 1.6;
    color: #4b5563;
  }

  .benefit-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    margin-top: 2px;
    color: #10b981;
  }

  /* Steps */
  .steps-container {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .step-item {
    display: flex;
    gap: 1.5rem;
    align-items: flex-start;
  }

  .step-number {
    width: 40px;
    height: 40px;
    background: #3b82f6;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    flex-shrink: 0;
  }

  .step-content {
    flex: 1;
  }

  .step-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 0.25rem;
  }

  .step-text {
    color: #6b7280;
    font-size: 0.875rem;
  }

  /* Results Table */
  .results-table {
    background: #f9fafb;
    border-radius: 8px;
    padding: 1rem;
  }

  .result-row {
    display: grid;
    grid-template-columns: 180px 1fr;
    gap: 1rem;
    padding: 1rem;
    border-bottom: 1px solid #e5e7eb;
  }

  .result-row:last-child {
    border-bottom: none;
  }

  .result-level {
    font-weight: 600;
    color: #111827;
  }

  .result-meaning {
    color: #4b5563;
  }

  /* FAQ */
  .faq-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .faq-item {
    background: #f9fafb;
    border-radius: 8px;
    padding: 1rem;
  }

  .faq-question {
    font-weight: 600;
    color: #111827;
    cursor: pointer;
    list-style: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .faq-question::-webkit-details-marker {
    display: none;
  }

  .faq-question::after {
    content: '+';
    font-size: 1.25rem;
    color: #6b7280;
  }

  details[open] .faq-question::after {
    content: '−';
  }

  .faq-answer {
    margin-top: 1rem;
    color: #4b5563;
    line-height: 1.6;
  }

  /* CTA Section */
  .cta-section {
    background: #f9fafb;
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 3.5rem;
  }

  .cta-text {
    font-size: 1rem;
    line-height: 1.6;
    color: #4b5563;
    margin: 0;
  }

  .cta-text strong {
    color: #111827;
  }

  /* Related Tests */
  .related-links {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .link-item {
    color: #3b82f6;
    text-decoration: none;
    font-size: 1rem;
  }

  .link-item:hover {
    text-decoration: underline;
  }

  @media (max-width: 640px) {
    .section-title {
      font-size: 1.5rem;
    }

    .section-text {
      font-size: 1rem;
    }

    .result-row {
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }
  }
</style>

<script>
  interface CartItem {
    id: string;
    name: string;
    price: number;
    quantity: number;
    category: string;
    subcategory: string;
    url: string;
  }

  const testData = {
    id: "0fdcad27-a0a1-4d8f-8ace-aa0f033fb3e2",
    name: "Iodine Test",
    price: 33.00,
    category: "general-health",
    subcategory: "minerals",
    questName: "Iodine Test",
    description: "Measure iodine levels in your urine to assess dietary intake and thyroid health.",
    turnaround: "3–5 business days",
    sampleType: "Urine (spot or 24-hour collection)",
    fastingRequired: false,
    fastingDuration: "",
    alsoKnownAs: ["Urinary Iodine Test","Iodine Concentration Test"]
  };

  document.getElementById('add-to-cart')?.addEventListener('click', () => {
    // Get existing cart
    let cart: CartItem[] = [];
    try {
      cart = JSON.parse(localStorage.getItem('cart') || '[]');
    } catch {
      cart = [];
    }

    // Check if item already in cart
    const existingItem = cart.find(item => item.id === testData.id);
    
    if (existingItem) {
      // Item already in cart, just open drawer
      const cartDrawer = document.getElementById('cart-drawer') as HTMLInputElement;
      if (cartDrawer) {
        cartDrawer.checked = true;
      }
    } else {
      // Add new item
      cart.push({
        ...testData,
        quantity: 1,
        url: "/tests/general-health/minerals/iodine/"
      });
      
      // Save cart
      localStorage.setItem('cart', JSON.stringify(cart));
      
      // Dispatch event for cart update
      window.dispatchEvent(new Event('cartUpdated'));
      
      // Open cart drawer
      const cartDrawer = document.getElementById('cart-drawer') as HTMLInputElement;
      if (cartDrawer) {
        cartDrawer.checked = true;
      }
      
      // Show success feedback
      const addButton = document.getElementById('add-to-cart') as HTMLButtonElement;
      const originalText = addButton.textContent;
      addButton.textContent = '✓ Added to Cart';
      addButton.classList.add('btn-success');
      
      setTimeout(() => {
        addButton.textContent = originalText;
        addButton.classList.remove('btn-success');
      }, 2000);
    }
  });
</script>

<!-- Structured Data for SEO -->
<script type="application/ld+json" is:inline>
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "Iodine Test",
  "description": "Measure iodine levels in your urine to assess dietary intake and thyroid health.",
  "sku": "0fdcad27-a0a1-4d8f-8ace-aa0f033fb3e2",
  "brand": {
    "@type": "Brand",
    "name": "Quest Diagnostics"
  },
  "offers": {
    "@type": "Offer",
    "url": "https://www.trackyourlabs.com/tests/general-health/minerals/iodine/",
    "priceCurrency": "USD",
    "price": "33.00",
    "priceValidUntil": "2025-12-31",
    "availability": "https://schema.org/InStock"
  }
}
</script>

<script type="application/ld+json" is:inline>
{
  "@context": "https://schema.org",
  "@type": "MedicalTest",
  "name": "Iodine Test",
  "description": "Measure iodine levels in your urine to assess dietary intake and thyroid health.",
  "usedToDiagnose": "general health, health assessment",
  "howPerformed": "Blood draw at Quest Diagnostics location"
}
</script>

<script type="application/ld+json" is:inline>
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://www.trackyourlabs.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Tests",
      "item": "https://www.trackyourlabs.com/tests/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Iodine Test",
      "item": "https://www.trackyourlabs.com/tests/general-health/minerals/iodine/"
    }
  ]
}
</script>
<!-- Google Merchant Listing Schema -->
<script type="application/ld+json" is:inline>
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "Iodine Test",
  "description": "Measure iodine levels in your urine to assess dietary intake and thyroid health.",
  "offers": {
    "@type": "Offer",
    "price": "33.00",
    "priceCurrency": "USD"
  }
}
</script>